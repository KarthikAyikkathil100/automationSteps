const axios = require('axios')
const videoIntelligence = require('@google-cloud/video-intelligence').v1;
const { Storage } = require('@google-cloud/storage');
const { getByName } = require('../@AwsHelpers/SSM/index')


async function getKey(name) {
    try {
        let creds = await getByName(name)
        resCreds = JSON.parse(creds)
        return resCreds
    } catch (e) {
        console.log('Error while fetching ssm key => {}')
        return null
    }
}


async function getCloudStorageClient() {
    try {
        const key = await getKey()
        if (!key) {
            throw new Error('Key not found')
        }
        const storage = new Storage({
            credentials: key
        })
        return storage
    } catch (e) {
        console.log('Error while prepping GCS client')
        return null
    }
}




module.exports = {
    axios
}