const AWS = require( 'aws-sdk' )

const S3 = new AWS.S3({
    region: process.env.Region && process.env.Region !== 'undefined' ? process.env.Region : 'us-east-1'
})

module.exports = {
  S3,
  uploadFile: (buffer, bucketName, fileName, mimeType) => {
    return new Promise(async (resolve, reject) => {
      try {
        const params = {
          Bucket: bucketName,
          Key: `textBlurFile/${fileName}`,
          Body: buffer,
          ContentType: mimeType 
        };
        await S3.upload(params).promise();
        resolve()
      } catch (e) {
        console.log(e);
        reject(e);
      }
    })
  },
}