const AWS = require( 'aws-sdk' )

const ssm = new AWS.SSM( {
	apiVersion: '2014-11-06',
	region: process.env.Region && process.env.Region !== 'undefined' ? process.env.Region : 'eu-north-1'
} )

async function getByName ( name ) {
	try {
		console.log( 'trying to getByName - name = ' + name )
		var params = {
			Name: `${name}`,
			WithDecryption: true
		}
		var request = await ssm.getParameter( params ).promise()
		return request.Parameter.Value
	} catch ( error ) {
		console.error( 'Failed to retrieve param' )
		console.error( error )
		throw error
	}
}

module.exports = {
	getByName
}
